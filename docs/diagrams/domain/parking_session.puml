@startuml parking_session
!include _style.puml

title Parkly â€” ParkingSession Aggregate

class ParkingSession <<Aggregate Root>> {
    id : SessionId
    reservation_id : ReservationId | None
    facility_id : FacilityId
    spot_id : SpotId
    vehicle_id : VehicleId
    entry_time : datetime
    exit_time : datetime | None
    total_cost : Money
    --
    extend(new_end: datetime, new_total_cost: Money)
    end(total_cost: Money, exit_time: datetime)
    calculate_cost(rate_per_hour: Money, current_time: datetime) : Money
}

class Money <<Value Object>> {
    amount : Decimal
    currency : Currency
    --
    add(other: Money) : Money
    subtract(other: Money) : Money
    multiply(factor: Decimal) : Money
}

ParkingSession o-- Money

@enduml
